<?php

namespace Stagem\ZfcAction;

return [
    // routes order is important
    'routes' => [
        [
            'name' => 'default',
            //'path' => '/{resource:[a-z-]{3,}}[/[{action:[a-z-]{3,}}[/{id:\d+}[/{more:.*}]]]]',
            'path' => '/[:resource[/[:action[/[:id]]]]]',
            'middleware' => [Page\ConnectivePage::class, Page\RendererMiddleware::class],
            'options' => [ // this don't work automatically, you need check this by hand
                'constraints' => [
                    'resource' => '[a-zA-Z]?[a-zA-Z0-9_-]*',
                    'action' => '[a-zA-Z]?[a-zA-Z0-9_-]*',
                    'id' => '[1-9]\d*',
                ],
                'defaults' => [
                    'resource' => 'index',
                    'action' => 'index',
                    'id' => '',
                ],
            ],
            //'allowed_methods' => ['GET', 'POST', 'PUT', 'DELETE'],
        ],
        [
            'name' => 'default/page',
            //'path' => '/{resource:[a-z-]{3,}}[/[{action:[a-z-]{3,}}[/{id:\d+}[/{more:.*}]]]]',
            'path' => '/[:resource[/[:action[/page:page]]]]',
            'middleware' => [Page\ConnectivePage::class, Page\RendererMiddleware::class],
            'options' => [ // this don't work automatically, you need check this by hand
                'constraints' => [
                    'resource' => '[a-zA-Z]?[a-zA-Z0-9_-]*',
                    'action' => '[a-zA-Z]?[a-zA-Z0-9_-]*',
                    'page' => '[0-9]+',
                ],
                'defaults' => [
                    'resource' => 'index',
                    'action' => 'index',
                    'page' => '1',
                ],
            ],
        ],
        [
            'name' => 'default/more',
            //'path' => '/{resource:[a-z-]{3,}}[/[{action:[a-z-]{3,}}[/{id:\d+}[/{more:.*}]]]]',
            'path' => '/[:resource[/[:action[/:more]]]]',
            'middleware' => [Page\ConnectivePage::class, Page\RendererMiddleware::class],
            'options' => [ // this don't work automatically, you need check this by hand
                'constraints' => [
                    'resource' => '[a-zA-Z]?[a-zA-Z0-9_-]*',
                    'action' => '[a-zA-Z]?[a-zA-Z0-9_-]*',
                    'more' => '.*',
                ],
                'defaults' => [
                    'resource' => 'index',
                    'action' => 'index',
                ],
            ],
        ],
        [
            'name' => 'default/home',
            'path' => '/',
            'middleware' => [\Stagem\Layout\Action\HomeAction::class, Page\RendererMiddleware::class],
            'allowed_methods' => ['GET'],
            'options' => [ // this doesn't set automatically, you need check this by hand
                'defaults' => [
                    'area' => 'home',
                    'resource' => 'index',
                    'action' => 'home',
                ],
            ],
        ],
    ],
    'dependencies' => [
        'factories' => [
            Page\ConnectivePage::class => Page\ConnectivePageFactory::class,
        ],
    ],
];